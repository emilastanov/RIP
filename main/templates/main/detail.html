{% extends "index.html" %}
{% load static %}
{% block content %}
<div class="container col-lg-6" style="margin-top: 80px;">
    <div class="card my-2 border-dark mb-3 text-center">
    <img class="card-img-top" src="/{{article.image}}" alt="Card image cap">
      <div class="card-body">
        <h5 class="card-title">{{article.title}}</h5>
        <p class="card-text">{{article.description}}</p>
      </div>
    </div>
</div>
<div class="container col-lg-6">
    <div class="card my-2 border-dark mb-3 text-right">
        <div class="card-body">
            <form id="comment">
                <input type="text" value="{{article.slug}}" name="post" hidden>
                <input id="name" type="text" name="name" class="form-control my-2" placeholder="Ваше имя">
                <textarea id="text" class="form-control" rows="2" placeholder="Добавьте Ваш комментарий" name="text"></textarea>
                <a class="btn btn-sm btn-primary my-2" style="text-decoration: none; color: white" onclick="comment()">Добавить</a>
            </form>
        </div>
    </div>
</div>
<script>
    function comment() {
        name = document.querySelector('#comment').querySelector('input#name').value;
        text = document.querySelector('#comment').querySelector('textarea#text').value;
        console.log(text)
        if (name == ''){
            document.querySelector('#comment').querySelector('input').style = "box-shadow: 0 0 4px red;"
        } else if (text == ''){
            document.querySelector('#comment').querySelector('input').style = "box-shadow: 0;"
            document.querySelector('#comment').querySelector('textarea#text').style = "box-shadow: 0 0 4px red;"
        } else {
            document.querySelector('#comment').submit()
        }
    }
    if (location.href.indexOf('?')>0){
        location = location.href.substring(0, location.href.indexOf('?'));
    }
</script>
{% for c in comments %}
    {% include 'main/comment.html' %}
{% endfor %}
{% endblock %}